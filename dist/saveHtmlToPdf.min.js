angular.module("htmlToPdfSave",[]),angular.module("htmlToPdfSave").directive("pdfSaveButton",["$rootScope","$pdfStorage",function(e,a){return{restrict:"A",scope:{beforeCallback:"&beforeCallback",afterCallback:"&afterCallback"},link:function(t,n,o){a.pdfSaveButtons.push(n),t.buttonText="Button",n.on("click",function(){var a=o.pdfSaveButton,n=o.pdfName,f=t.beforeCallback,d=t.afterCallback;e.$broadcast("savePdfEvent",{activePdfSaveId:a,activePdfSaveName:n,beforeCallback:f,afterCallback:d})})}}}]),angular.module("htmlToPdfSave").directive("pdfSaveContent",["$rootScope","$pdfStorage",function(e,a){return{link:function(e,t,n){a.pdfSaveContents.push(t);var o=e.$on("savePdfEvent",function(e,n){function o(e,a){return e==a}for(var f=t[0].getAttribute("pdf-save-content"),d=a.pdfSaveContents,r=n.activePdfSaveId,v=n.activePdfSaveName||"default.pdf",i=n.beforeCallback,c=n.afterCallback,l=0;l<d.length;l++)if(o(r,f)){var u=d[l][0].getAttribute("pdf-save-content");if(o(u,r)){console.log("Id is same"),function(e,a){!function(e,a){var t=$("div[pdf-save-content="+a+"]")[0];html2canvas(t,{onpreloaded:function(){i&&i()},onrendered:function(e){for(var a=new jsPDF("p","pt","letter"),n=0;n<=t.clientHeight/980;n++){var o=e,f=980*n,d=t.clientWidth;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",900),onePageCanvas.setAttribute("height",980);var r=onePageCanvas.getContext("2d");r.drawImage(o,0,f,d,980,0,0,900,980);var i=onePageCanvas.toDataURL("image/png",1),l=onePageCanvas.width,u=onePageCanvas.clientHeight;n>0&&a.addPage(612,791),a.setPage(n+1),a.addImage(i,"PNG",20,40,.62*l,.62*u)}a.save(v),c&&c()}})}(0,a)}(0,u);break}}});e.$on("$destroy",o)}}}]),angular.module("htmlToPdfSave").service("$pdfStorage",function(){this.pdfSaveButtons=[],this.pdfSaveContents=[]}).service("pdfSaveConfig",function(){this.pdfName="default.pdf"});