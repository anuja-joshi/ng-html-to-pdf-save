angular.module("htmlToPdfSave",[]),angular.module("htmlToPdfSave").directive("pdfSaveButton",["$rootScope","$pdfStorage",function(e,t){return{restrict:"A",link:function(a,n,o){t.pdfSaveButtons.push(n),a.buttonText="Button",n.on("click",function(){var t=o.pdfSaveButton,a=o.pdfName;e.$broadcast("savePdfEvent",{activePdfSaveId:t,activePdfSaveName:a})})}}}]),angular.module("htmlToPdfSave").directive("pdfSaveContent",["$rootScope","$pdfStorage",function(e,t){return{link:function(e,a,n){t.pdfSaveContents.push(a);var o=e.$on("savePdfEvent",function(e,n){function o(e,t){return e==t}for(var i=a[0].getAttribute("pdf-save-content"),d=t.pdfSaveContents,r=n.activePdfSaveId,f=n.activePdfSaveName||"default.pdf",v=0;v<d.length;v++)if(o(r,i)){var s=d[v][0].getAttribute("pdf-save-content");if(o(s,r)){console.log("Id is same"),function(e,t){!function(e,t){var a=$("div[pdf-save-content="+t+"]")[0];html2canvas(a,{onpreloaded:function(){$(a).find("table:first").parent().css({overflow:"visible",height:"auto",width:"auto"})},onrendered:function(e){for(var t=new jsPDF("p","pt","letter"),n=0;n<=a.clientHeight/980;n++){var o=e,i=980*n,d=a.clientWidth;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",900),onePageCanvas.setAttribute("height",980);var r=onePageCanvas.getContext("2d");r.drawImage(o,0,i,d,980,0,0,900,980);var v=onePageCanvas.toDataURL("image/png",1),s=onePageCanvas.width,c=onePageCanvas.clientHeight;n>0&&t.addPage(612,791),t.setPage(n+1),t.addImage(v,"PNG",20,40,.62*s,.62*c)}t.save(f),$(a).find("table:first").parent().css({overflow:"scroll",height:$(a).attr("originalHeight"),width:$(a).attr("originalWidth")})}})}(0,t)}(0,s);break}}});e.$on("$destroy",o)}}}]),angular.module("htmlToPdfSave").service("$pdfStorage",function(){this.pdfSaveButtons=[],this.pdfSaveContents=[]}).service("pdfSaveConfig",function(){this.pdfName="default.pdf"});